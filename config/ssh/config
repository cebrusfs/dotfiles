# vim: syntax=sshconfig

# Adding compression to help speed up remote Vim.
# https://stackoverflow.com/a/34206244/358069
Compression yes

# Work stations @ NTU.CSIE {{{
Host ws1 ws2 ws3 ws4 ws5 ws6 ws7
    User r04922033
    # ws\d -> ws\d.csie.ntu.edu.tw
    CanonicalizeHostname yes
    CanonicalDomains csie.ntu.edu.tw

Host nslab
    User cebrusfs
    HostName 140.112.31.100
# }}}

# VPS {{{

# Oracle
Host amd-micro
    HostName 152.70.104.204
    User ubuntu
Host vpn
    HostName vpn.cerberus.fish
    User ubuntu
Host arm-perf
    HostName 138.3.221.172
    User ubuntu

# GCP
Host free-us
    HostName 34.23.13.111
    User cebrusfs

# Layerstack

# }}}

# Work
Host corp*
    # tmux with iterm2 integration
    RemoteCommand tmx2 -CC new -A -s tmux-main
    RequestTTY yes

    # SSH Multiplexing
    #   Prevent 2FA everytime. Faster re-connection.
    #   But new config (e.g. tunneling) won't take effect immediately other than first connection.
    ControlMaster auto
    ControlPath ~/.ssh/controlmaster-%C
    ControlPersist 600


# Default
Host amd-micro vpn arm-perf free-us ws* !github.com
    # enable tmux with iterm integration
    RemoteCommand tmux -CC new -A -s tmux-main
    # TTY is require to support tmux control command
    RequestTTY yes
