# vim: set noet:

[user]
	name = Meng-Huan Yu
	email = 2252236+cebrusfs@users.noreply.github.com

[push]
	default = simple
[filter "lfs"]
	required = true
	clean = git-lfs clean -- %f
	smudge = git-lfs smudge -- %f

[diff]
	# Git built-in moved blocks detection
	colorMoved = default

[merge]
	tool = vimdiff
	conflictStyle = zdiff3 # TODO: don't know what's for

[mergetool]
	prompt = false
	keepBackup = false

# Use rebase instead of merge when pull
[pull]
	rebase = true
[branch]
	autosetuprebase = always

# UI
[core]
	# Use vim as default editor
	editor = vim

	# Fancy diff
	# Use delta pager but rely on zsh env setup to detect if delta is installed for a fallback
	# $GIT_PAGER -> core.pager -> $PAGER
	#pager = delta

[interactive]
	diffFilter = delta --color-only

# Delta configurations
[include]
	path = ~/.config/git/themes.gitconfig
[delta]
	dark = true
	navigate = true  # use n and N to move between diff sections
	side-by-side = true # side-by-side diff

	features = gruvmax-fang

	# Slightly lighter
	plus-style = syntax "#001c00"

	# Use yellow for filename to match diff-so-fancy default style
	file-style = yellow bold

[stash]
	# Show file diff in `git stash show`
	showPatch = true

[format]
	# Show all commit metadata in `git log`
	pretty = fuller

#[commit]
#	gpgsign = true
[gpg]
	format = ssh
[gpg "ssh"]
	# workaround to support "ecdsa-sha2-nistp256" key type
	defaultKeyCommand = sh -c 'echo key::$(ssh-add -L | head -n 1)'
	allowedSignersFile = ~/.config/git/allowed_signers

# chromeOS Internal repo setting
# https://www.chromium.org/chromium-os/developer-guide/gerrit-guide/#googlers-partners-to-get-access-to-the-internal-chrome-gerrit-instance
[depot-tools]
	useNewAuthStack = 1
[url "sso://chromium"]
	insteadOf = https://chromium.googlesource.com
	insteadOf = https://chromium-review.googlesource.com
[url "sso://chrome-internal"]
	insteadOf = https://chrome-internal.googlesource.com
	insteadOf = https://chrome-internal-review.googlesource.com
